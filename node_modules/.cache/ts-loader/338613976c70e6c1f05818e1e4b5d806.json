{"remainingRequest":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/ts-loader/index.js??ref--13-1!/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue","mtime":1671064436000},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/cache-loader/dist/cjs.js","mtime":1678071094995},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/ts-loader/index.js","mtime":1678071095151},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/cache-loader/dist/cjs.js","mtime":1678071094995},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/index.js","mtime":1678071098307}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgcmVhY3RpdmUsIHRvUmVmcywgb25Nb3VudGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgZGVlcENvcHksIG51bUZvcm1hdCwgZ2V0Q29sb3JCeUluZGV4IH0gZnJvbSAiQC91dGlscy9jb21tb24iOwppbXBvcnQgeyBtaW5pQ2lyY2xlT3B0aW9uIH0gZnJvbSAiQC91dGlscy9jaGFydC1vcHRpb25zIjsKaW1wb3J0IHsgYnVzSW5mbyB9IGZyb20gIkAvYXBpL29wZXJhdGlvbi1zY3JlZW4iOwppbXBvcnQgdXNlT3B0aW9ucyBmcm9tICIuL3VzZS1vcHRpb25zIjsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICAgIG5hbWU6ICJidXMiLAogICAgcHJvcHM6IHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgfSwKICAgIH0sCiAgICBzZXR1cDogZnVuY3Rpb24gKHByb3BzKSB7CiAgICAgICAgdmFyIF9hID0gdXNlT3B0aW9ucygpLCBzY3JlZW5EYXRhVHlwZSA9IF9hLnNjcmVlbkRhdGFUeXBlLCBnZXRUaXRsZSA9IF9hLmdldFRpdGxlLCBjaGFydFN0eWxlID0gX2EuY2hhcnRTdHlsZTsKICAgICAgICB2YXIgY29sb3JBcnIgPSBbCiAgICAgICAgICAgIHsgc3RhcnQ6ICIjNERFOEZGIiwgZW5kOiAiIzJBQTZGRiIgfSwKICAgICAgICAgICAgeyBzdGFydDogIiNGRkZCMDAiLCBlbmQ6ICIjRkZBMzAwIiB9LAogICAgICAgIF07CiAgICAgICAgdmFyIG9wdGlvbnMgPSByZWFjdGl2ZSh7CiAgICAgICAgICAgIGNhck51bXM6IDMyMDAsCiAgICAgICAgICAgIHB1cmVFbGVjdHJpY051bXM6IDM1MCwKICAgICAgICAgICAgaHlicmlkTnVtczogMjAwLAogICAgICAgICAgICBnYXNOdW1zOiA0NTAsCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHB1cmVFbGVjdHJpY051bXNPcHRpb24gPSByZWFjdGl2ZShkZWVwQ29weShtaW5pQ2lyY2xlT3B0aW9uKSk7CiAgICAgICAgdmFyIGh5YnJpZE51bXNPcHRpb24gPSByZWFjdGl2ZShkZWVwQ29weShtaW5pQ2lyY2xlT3B0aW9uKSk7CiAgICAgICAgdmFyIGdhc051bXNPcHRpb24gPSByZWFjdGl2ZShkZWVwQ29weShtaW5pQ2lyY2xlT3B0aW9uKSk7CiAgICAgICAgLy/liJ3lp4vljJbmlbDmja4KICAgICAgICBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICAgICAgICAgICAgYnVzSW5mbyh7IHR5cGU6IHNjcmVlbkRhdGFUeXBlLnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgcmVmcmVzaERhdGEoZGF0YSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygib3B0aW9ucyIsIHRvUmVmcyhvcHRpb25zKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRhKHZhbCkgewogICAgICAgICAgICByZXR1cm4gKCh2YWwgLyBvcHRpb25zLmNhck51bXMpICogMTAwKS50b0ZpeGVkKDApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmb3JtYXRDaGFydChvcHRpb25OYW1lLCB2YWwsIG5hbWUpIHsKICAgICAgICAgICAgb3B0aW9uTmFtZS50aXRsZS50ZXh0ID0gZm9ybWF0RGF0YSh2YWwpICsgIiUiOwogICAgICAgICAgICBjb25zb2xlLmxvZygidmFsIiwgdmFsKTsKICAgICAgICAgICAgb3B0aW9uTmFtZS5zZXJpZXNbMF0uZGF0YVswXS52YWx1ZSA9IHZhbDsKICAgICAgICAgICAgb3B0aW9uTmFtZS5zZXJpZXNbMF0uZGF0YVswXS5uYW1lID0gbmFtZTsKICAgICAgICAgICAgb3B0aW9uTmFtZS5zZXJpZXNbMV0uZGF0YVswXS52YWx1ZSA9IG9wdGlvbnMuY2FyTnVtczsKICAgICAgICB9CiAgICAgICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaW5pdERhdGEoKTsKICAgICAgICB9KTsKICAgICAgICAvL+WIt+aWsOaVsOaNrgogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hEYXRhKGRhdGEpIHsKICAgICAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FyTnVtcyA9IGRhdGEuY2FyTnVtczsKICAgICAgICAgICAgICAgIG9wdGlvbnMucHVyZUVsZWN0cmljTnVtcyA9IGRhdGEucHVyZUVsZWN0cmljTnVtczsKICAgICAgICAgICAgICAgIG9wdGlvbnMuaHlicmlkTnVtcyA9IGRhdGEuaHlicmlkTnVtczsKICAgICAgICAgICAgICAgIG9wdGlvbnMuZ2FzTnVtcyA9IGRhdGEuZ2FzTnVtczsKICAgICAgICAgICAgICAgIHB1cmVFbGVjdHJpY051bXNPcHRpb24udGl0bGUudGV4dCA9IGZvcm1hdERhdGEoZGF0YS5wdXJlRWxlY3RyaWNOdW1zKTsKICAgICAgICAgICAgICAgIGZvcm1hdENoYXJ0KHB1cmVFbGVjdHJpY051bXNPcHRpb24sIGRhdGEucHVyZUVsZWN0cmljTnVtcywgIue6r+eUtSIpOwogICAgICAgICAgICAgICAgZm9ybWF0Q2hhcnQoaHlicmlkTnVtc09wdGlvbiwgZGF0YS5oeWJyaWROdW1zLCAi5re35YqoIik7CiAgICAgICAgICAgICAgICBoeWJyaWROdW1zT3B0aW9uLnNlcmllc1swXS5kYXRhWzBdLml0ZW1TdHlsZS5jb2xvciA9IGdldENvbG9yQnlJbmRleChjb2xvckFyciwgMCk7CiAgICAgICAgICAgICAgICBmb3JtYXRDaGFydChnYXNOdW1zT3B0aW9uLCBkYXRhLmdhc051bXMsICLnh4PmsJQiKTsKICAgICAgICAgICAgICAgIGdhc051bXNPcHRpb24uc2VyaWVzWzBdLmRhdGFbMF0uaXRlbVN0eWxlLmNvbG9yID0gZ2V0Q29sb3JCeUluZGV4KGNvbG9yQXJyLCAxKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgY3VyVGl0bGUgPSBnZXRUaXRsZShwcm9wcyk7CiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0b1JlZnMob3B0aW9ucykpLCB7IHNjcmVlbkRhdGFUeXBlOiBzY3JlZW5EYXRhVHlwZSwKICAgICAgICAgICAgY2hhcnRTdHlsZTogY2hhcnRTdHlsZSwKICAgICAgICAgICAgbnVtRm9ybWF0OiBudW1Gb3JtYXQsCiAgICAgICAgICAgIHB1cmVFbGVjdHJpY051bXNPcHRpb246IHB1cmVFbGVjdHJpY051bXNPcHRpb24sCiAgICAgICAgICAgIGh5YnJpZE51bXNPcHRpb246IGh5YnJpZE51bXNPcHRpb24sCiAgICAgICAgICAgIGdhc051bXNPcHRpb246IGdhc051bXNPcHRpb24sCiAgICAgICAgICAgIGN1clRpdGxlOiBjdXJUaXRsZSwKICAgICAgICAgICAgaW5pdERhdGE6IGluaXREYXRhIH0pOwogICAgfSwKfSk7Cg=="},{"version":3,"file":"/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue.ts","sourceRoot":"","sources":["/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { defineComponent, reactive, toRefs, onMounted } from \"vue\";\nimport { deepCopy, numFormat, getColorByIndex } from \"@/utils/common\";\nimport { miniCircleOption } from \"@/utils/chart-options\";\nimport { busInfo } from \"@/api/operation-screen\";\nimport useOptions from \"./use-options\";\nexport default defineComponent({\n  name: \"bus\",\n  props: {\n    title: {\n      type: String,\n    },\n  },\n  setup(props) {\n    const { screenDataType, getTitle, chartStyle } = useOptions();\n    const colorArr = [\n      { start: \"#4DE8FF\", end: \"#2AA6FF\" },\n      { start: \"#FFFB00\", end: \"#FFA300\" },\n    ];\n    let options = reactive({\n      carNums: 3200, //车辆 标台数\n      pureElectricNums: 350, //纯电数\n      hybridNums: 200, //混动数\n      gasNums: 450, //燃气数\n    });\n    let pureElectricNumsOption = reactive(deepCopy(miniCircleOption));\n    let hybridNumsOption = reactive(deepCopy(miniCircleOption));\n    let gasNumsOption = reactive(deepCopy(miniCircleOption));\n    //初始化数据\n    function initData() {\n      busInfo({ type: screenDataType.value }).then((res) => {\n        const data = res.data.data;\n        refreshData(data);\n        console.log(\"options\", toRefs(options));\n      });\n    }\n    function formatData(val) {\n      return ((val / options.carNums) * 100).toFixed(0);\n    }\n    function formatChart(optionName, val, name) {\n      optionName.title.text = formatData(val) + \"%\";\n      console.log(\"val\", val);\n      optionName.series[0].data[0].value = val;\n      optionName.series[0].data[0].name = name;\n      optionName.series[1].data[0].value = options.carNums;\n    }\n    onMounted(() => {\n      initData();\n    });\n    //刷新数据\n    function refreshData(data) {\n      if (data) {\n        options.carNums = data.carNums;\n        options.pureElectricNums = data.pureElectricNums;\n        options.hybridNums = data.hybridNums;\n        options.gasNums = data.gasNums;\n\n        pureElectricNumsOption.title.text = formatData(data.pureElectricNums);\n        formatChart(pureElectricNumsOption, data.pureElectricNums, \"纯电\");\n        formatChart(hybridNumsOption, data.hybridNums, \"混动\");\n        hybridNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          0\n        );\n        formatChart(gasNumsOption, data.gasNums, \"燃气\");\n        gasNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          1\n        );\n      }\n    }\n    const curTitle = getTitle(props);\n    return {\n      ...toRefs(options),\n      screenDataType,\n      chartStyle,\n      numFormat,\n      pureElectricNumsOption,\n      hybridNumsOption,\n      gasNumsOption,\n      curTitle,\n      initData\n    };\n  },\n});\n"]}]}