{"remainingRequest":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/ts-loader/index.js??ref--13-1!/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/eslint-loader/index.js??ref--12-0!/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/axios/index.ts","dependencies":[{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/axios/index.ts","mtime":1671064436000},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/cache-loader/dist/cjs.js","mtime":1678071094995},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/ts-loader/index.js","mtime":1678071095151},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/eslint-loader/index.js","mtime":1678071073091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7Ci8v6buY6K6k6LaF5pe25pe26Ze0CmF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSAxMDAwMDA7IC8vMTBzCmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAnL2FwaSc7IC8v6buY6K6k6K+35rGC5YmN57yACi8v5qih5oufdG9rZW4KZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgICByZXR1cm4gJ3Rlc3QnOwp9CnZhciBjbG9jayA9IG51bGw7Ci8vaHR0cCByZXF1ZXN05oum5oiqCmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAvL+iuqeavj+S4quivt+axguaQuuW4pnRva2VuCiAgICBpZiAoZ2V0VG9rZW4oKSkgewogICAgICAgIGNvbmZpZy5oZWFkZXJzWyd0b2tlbkhlYWRlciddID0gJ2JlYXJlciAnICsgZ2V0VG9rZW4oKTsKICAgIH0KICAgIC8vaGVhZGVyc+S4remFjee9rnRleHTor7fmsYIKICAgIC8vIGlmIChjb25maWcudGV4dCA9PT0gdHJ1ZSkgewogICAgLy8gICBjb25maWcuaGVhZGVyc1siQ29udGVudC1UeXBlIl0gPSAidGV4dC9wbGFpbiI7CiAgICAvLyB9CiAgICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwovL2h0dHAgcmVzcG9uc2Ug5oum5oiqCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogICAgLy/ojrflj5bnirbmgIHnoIEKICAgIHZhciBzdGF0dXMgPSByZXMuZGF0YS5jb2RlOwogICAgdmFyIG1zZyA9IHJlcy5kYXRhLm1zZyB8fCAn5pyq55+l6ZSZ6K+vJzsKICAgIC8v5aaC5p6c5pivNDAx5YiZ6Lez6L2s5Yiw55m75b2V6aG16Z2iCiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAvL+mZkOWumuaXtumXtOWGheWPquiDveaJp+ihjOS4gOasoQogICAgICAgIGlmICghY2xvY2spIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKG1zZyk7CiAgICAgICAgfQogICAgICAgIGNsb2NrID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNsb2NrID0gbnVsbDsKICAgICAgICB9LCAyMDAwKTsKICAgICAgICAvL+mAgOWHuueZu+W9lQogICAgICAgIHJvdXRlci5wdXNoKHsgcGF0aDogJy9sb2dpbicgfSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAvLyDlpoLmnpzlk43lupTnirbmgIHnoIHkuI3nrYnkuo4yMDAg77yM57uf5LiA6L+b6KGM6ZSZ6K+v5aSE55CGCiAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihtc2cpOwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKG1zZykpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXM7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihlcnJvcikpOwp9KTsKZXhwb3J0IGRlZmF1bHQgYXhpb3M7Cg=="},{"version":3,"file":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/axios/index.ts","sourceRoot":"","sources":["/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/eslint-loader/index.js??ref--12-0!/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/axios/index.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAA;AACxC,OAAO,MAAM,MAAM,UAAU,CAAA;AAE7B,QAAQ;AACR,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAE,MAAM,CAAC,CAAC,KAAK;AACrC,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,QAAQ;AACzC,SAAS;AACT,SAAS,QAAQ;IACb,OAAO,MAAM,CAAC;AAClB,CAAC;AACD,IAAI,KAAK,GAAO,IAAI,CAAC;AACrB,gBAAgB;AAChB,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM;IACjC,cAAc;IACd,IAAI,QAAQ,EAAE,EAAE;QACZ,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG,SAAS,GAAG,QAAQ,EAAE,CAAC;KAC1D;IACD,kBAAkB;IAClB,8BAA8B;IAC9B,mDAAmD;IACnD,IAAI;IACJ,OAAO,MAAM,CAAA;AACf,CAAC,EAAE,UAAA,KAAK;IACN,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC9B,CAAC,CAAC,CAAC;AACH,kBAAkB;AAClB,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,GAAG;IACjC,OAAO;IACP,IAAM,MAAM,GAAQ,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;IAClC,IAAM,GAAG,GAAO,GAAG,CAAC,IAAI,CAAC,GAAG,IAAG,MAAM,CAAC;IACtC,gBAAgB;IAChB,IAAI,MAAM,KAAK,GAAG,EAAE;QAClB,aAAa;QACb,IAAI,CAAC,KAAK,EAAE;YACV,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACtB;QACD,KAAK,GAAG,UAAU,CAAC;YACjB,KAAK,GAAG,IAAI,CAAC;QACf,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,MAAM;QACN,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAA;KAChC;SAAM;QACL,0BAA0B;QAC1B,IAAI,MAAM,KAAK,GAAG,EAAE;YAClB,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrB,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SACvC;KACF;IACD,OAAO,GAAG,CAAC;AACb,CAAC,EAAE,UAAA,KAAK;IACN,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,eAAe,KAAK,CAAC","sourcesContent":["import axios from 'axios';\nimport { ElMessage } from 'element-plus'\nimport router from '@/router'\n\n//默认超时时间\naxios.defaults.timeout =100000; //10s\naxios.defaults.baseURL = '/api'; //默认请求前缀\n//模拟token\nfunction getToken(){\n    return 'test';\n}\nlet clock:any = null;\n//http request拦截\naxios.interceptors.request.use(config => {\n    //让每个请求携带token\n    if (getToken()) {\n        config.headers['tokenHeader'] = 'bearer ' + getToken();\n    }\n    //headers中配置text请求\n    // if (config.text === true) {\n    //   config.headers[\"Content-Type\"] = \"text/plain\";\n    // }\n    return config\n  }, error => {\n    return Promise.reject(error)\n  });\n  //http response 拦截\n  axios.interceptors.response.use(res => {\n    //获取状态码\n    const status:number=res.data.code;\n    const msg:any = res.data.msg ||'未知错误';\n    //如果是401则跳转到登录页面\n    if (status === 401) {\n      //限定时间内只能执行一次\n      if (!clock) {\n        ElMessage.error(msg);\n      }\n      clock = setTimeout(() => {\n        clock = null;\n      }, 2000);\n      //退出登录\n      router.push({ path: '/login' })\n    } else {\n      // 如果响应状态码不等于200 ，统一进行错误处理\n      if (status !== 200) {\n        ElMessage.error(msg);\n        return Promise.reject(new Error(msg));\n      }\n    }\n    return res;\n  }, error => {\n    return Promise.reject(new Error(error));\n  });\n  \n  export default axios;"]}]}