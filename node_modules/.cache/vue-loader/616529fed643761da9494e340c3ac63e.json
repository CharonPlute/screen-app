{"remainingRequest":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue?vue&type=template&id=02952ffd&scoped=true","dependencies":[{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue","mtime":1671064436000},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1678071098307},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/cache-loader/dist/cjs.js","mtime":1678071094995},{"path":"/Users/charon/Desktop/jing/code/screen-project/screen-app/node_modules/vue-loader-v16/dist/index.js","mtime":1678071098307}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iY2FyIj4KICAgIDxqaWUtaGVhZGVyIDp0aXRsZT0iY3VyVGl0bGUiPgogICAgICA8ZGl2IGNsYXNzPSJoZWFkLWluZm8iPgogICAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+5qCH5Y+w5pWw77yaPC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJ2YWwiPnt7IG51bUZvcm1hdChjYXJOdW1zKSB9fTwvc3Bhbj4KICAgICAgICA8c3BhbiBjbGFzcz0idW5pdCI+6L6GPC9zcGFuPgogICAgICA8L2Rpdj4KICAgIDwvamllLWhlYWRlcj4KICAgIDxkaXYgY2xhc3M9ImNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJsZWZ0LWJveCI+CiAgICAgICAgPGppZS1lY2hhcnRzCiAgICAgICAgICBpZD0icHVyZUVsZWN0cmljTnVtcyIKICAgICAgICAgIDpzdHlsZT0iY2hhcnRTdHlsZSIKICAgICAgICAgIDpvcHRpb249InB1cmVFbGVjdHJpY051bXNPcHRpb24iCiAgICAgICAgLz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImNlbnRlci1ib3giPgogICAgICAgIDxqaWUtZWNoYXJ0cwogICAgICAgICAgaWQ9Imh5YnJpZE51bXMiCiAgICAgICAgICA6c3R5bGU9ImNoYXJ0U3R5bGUiCiAgICAgICAgICA6b3B0aW9uPSJoeWJyaWROdW1zT3B0aW9uIgogICAgICAgIC8+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyaWdodC1ib3giPgogICAgICAgIDxqaWUtZWNoYXJ0cyBpZD0iZ2FzTnVtcyIgOnN0eWxlPSJjaGFydFN0eWxlIiA6b3B0aW9uPSJnYXNOdW1zT3B0aW9uIiAvPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0idGl0bGUtYm94Ij4KICAgICAgPHNwYW4gY2xhc3M9ImNoYXJ0LXRpdGxlIj7nuq/nlLU8L3NwYW4+PHNwYW4gY2xhc3M9ImNoYXJ0LXRpdGxlIj7mt7fliqg8L3NwYW4KICAgICAgPjxzcGFuIGNsYXNzPSJjaGFydC10aXRsZSI+54eD5rCUPC9zcGFuPgogICAgPC9kaXY+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue"],"names":[],"mappings":"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CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MACzE,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/charon/Desktop/jing/code/screen-project/screen-app/src/views/operation-screen/Bus.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"car\">\n    <jie-header :title=\"curTitle\">\n      <div class=\"head-info\">\n        <span class=\"label\">标台数：</span>\n        <span class=\"val\">{{ numFormat(carNums) }}</span>\n        <span class=\"unit\">辆</span>\n      </div>\n    </jie-header>\n    <div class=\"content\">\n      <div class=\"left-box\">\n        <jie-echarts\n          id=\"pureElectricNums\"\n          :style=\"chartStyle\"\n          :option=\"pureElectricNumsOption\"\n        />\n      </div>\n      <div class=\"center-box\">\n        <jie-echarts\n          id=\"hybridNums\"\n          :style=\"chartStyle\"\n          :option=\"hybridNumsOption\"\n        />\n      </div>\n      <div class=\"right-box\">\n        <jie-echarts id=\"gasNums\" :style=\"chartStyle\" :option=\"gasNumsOption\" />\n      </div>\n    </div>\n    <div class=\"title-box\">\n      <span class=\"chart-title\">纯电</span><span class=\"chart-title\">混动</span\n      ><span class=\"chart-title\">燃气</span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, onMounted } from \"vue\";\nimport { deepCopy, numFormat, getColorByIndex } from \"@/utils/common\";\nimport { miniCircleOption } from \"@/utils/chart-options\";\nimport { busInfo } from \"@/api/operation-screen\";\nimport useOptions from \"./use-options\";\nexport default defineComponent({\n  name: \"bus\",\n  props: {\n    title: {\n      type: String,\n    },\n  },\n  setup(props) {\n    const { screenDataType, getTitle, chartStyle } = useOptions();\n    const colorArr = [\n      { start: \"#4DE8FF\", end: \"#2AA6FF\" },\n      { start: \"#FFFB00\", end: \"#FFA300\" },\n    ];\n    let options = reactive({\n      carNums: 3200, //车辆 标台数\n      pureElectricNums: 350, //纯电数\n      hybridNums: 200, //混动数\n      gasNums: 450, //燃气数\n    });\n    let pureElectricNumsOption = reactive(deepCopy(miniCircleOption));\n    let hybridNumsOption = reactive(deepCopy(miniCircleOption));\n    let gasNumsOption = reactive(deepCopy(miniCircleOption));\n    //初始化数据\n    function initData() {\n      busInfo({ type: screenDataType.value }).then((res) => {\n        const data = res.data.data;\n        refreshData(data);\n        console.log(\"options\", toRefs(options));\n      });\n    }\n    function formatData(val) {\n      return ((val / options.carNums) * 100).toFixed(0);\n    }\n    function formatChart(optionName, val, name) {\n      optionName.title.text = formatData(val) + \"%\";\n      console.log(\"val\", val);\n      optionName.series[0].data[0].value = val;\n      optionName.series[0].data[0].name = name;\n      optionName.series[1].data[0].value = options.carNums;\n    }\n    onMounted(() => {\n      initData();\n    });\n    //刷新数据\n    function refreshData(data) {\n      if (data) {\n        options.carNums = data.carNums;\n        options.pureElectricNums = data.pureElectricNums;\n        options.hybridNums = data.hybridNums;\n        options.gasNums = data.gasNums;\n\n        pureElectricNumsOption.title.text = formatData(data.pureElectricNums);\n        formatChart(pureElectricNumsOption, data.pureElectricNums, \"纯电\");\n        formatChart(hybridNumsOption, data.hybridNums, \"混动\");\n        hybridNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          0\n        );\n        formatChart(gasNumsOption, data.gasNums, \"燃气\");\n        gasNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          1\n        );\n      }\n    }\n    const curTitle = getTitle(props);\n    return {\n      ...toRefs(options),\n      screenDataType,\n      chartStyle,\n      numFormat,\n      pureElectricNumsOption,\n      hybridNumsOption,\n      gasNumsOption,\n      curTitle,\n      initData\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  display: flex;\n  height: calc(100% - 34px);\n  .left-box,\n  .center-box,\n  .right-box {\n    width: 33.3%;\n    position: relative;\n  }\n}\n.head-info {\n  display: flex;\n  align-items: baseline;\n  .val {\n    color: #ffe500;\n    font-size: 20px;\n  }\n  .label,\n  .unit {\n    color: #eeeeee;\n    font-size: 14px;\n    // display: flex;\n    // align-items: baseline;\n  }\n  .unit {\n    padding-left: 4px;\n  }\n}\n.car {\n  position: relative;\n  height: 100%;\n}\n.title-box {\n  position: absolute;\n  display: flex;\n  width: 100%;\n  color: white;\n  font-size: 16px;\n  height: 20px;\n  bottom: 5px;\n  z-index: 2;\n  .chart-title {\n    width: 33.3%;\n    display: flex;\n    justify-content: center;\n  }\n}\n</style>\n"]}]}