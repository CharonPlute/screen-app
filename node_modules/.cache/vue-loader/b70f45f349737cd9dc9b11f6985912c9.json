{"remainingRequest":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/views/operation-screen/Bus.vue?vue&type=style&index=0&id=02952ffd&lang=scss&scoped=true","dependencies":[{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/views/operation-screen/Bus.vue","mtime":1671064436000},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/css-loader/dist/cjs.js","mtime":1678071097229},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1678071098307},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/postcss-loader/src/index.js","mtime":1678071097872},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/sass-loader/dist/cjs.js","mtime":1678071117501},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/cache-loader/dist/cjs.js","mtime":1678071094995},{"path":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/node_modules/vue-loader-v16/dist/index.js","mtime":1678071098307}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jb250ZW50IHsKICBkaXNwbGF5OiBmbGV4OwogIGhlaWdodDogY2FsYygxMDAlIC0gMzRweCk7CiAgLmxlZnQtYm94LAogIC5jZW50ZXItYm94LAogIC5yaWdodC1ib3ggewogICAgd2lkdGg6IDMzLjMlOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogIH0KfQouaGVhZC1pbmZvIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBiYXNlbGluZTsKICAudmFsIHsKICAgIGNvbG9yOiAjZmZlNTAwOwogICAgZm9udC1zaXplOiAyMHB4OwogIH0KICAubGFiZWwsCiAgLnVuaXQgewogICAgY29sb3I6ICNlZWVlZWU7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICAvLyBkaXNwbGF5OiBmbGV4OwogICAgLy8gYWxpZ24taXRlbXM6IGJhc2VsaW5lOwogIH0KICAudW5pdCB7CiAgICBwYWRkaW5nLWxlZnQ6IDRweDsKICB9Cn0KLmNhciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGhlaWdodDogMTAwJTsKfQoudGl0bGUtYm94IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogZmxleDsKICB3aWR0aDogMTAwJTsKICBjb2xvcjogd2hpdGU7CiAgZm9udC1zaXplOiAxNnB4OwogIGhlaWdodDogMjBweDsKICBib3R0b206IDVweDsKICB6LWluZGV4OiAyOwogIC5jaGFydC10aXRsZSB7CiAgICB3aWR0aDogMzMuMyU7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgfQp9Cg=="},{"version":3,"sources":["/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/views/operation-screen/Bus.vue"],"names":[],"mappings":"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","file":"/Users/charon/Desktop/阿京/代码/vue3_book_codes-main/codes/chapter9/screen-app/src/views/operation-screen/Bus.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"car\">\n    <jie-header :title=\"curTitle\">\n      <div class=\"head-info\">\n        <span class=\"label\">标台数：</span>\n        <span class=\"val\">{{ numFormat(carNums) }}</span>\n        <span class=\"unit\">辆</span>\n      </div>\n    </jie-header>\n    <div class=\"content\">\n      <div class=\"left-box\">\n        <jie-echarts\n          id=\"pureElectricNums\"\n          :style=\"chartStyle\"\n          :option=\"pureElectricNumsOption\"\n        />\n      </div>\n      <div class=\"center-box\">\n        <jie-echarts\n          id=\"hybridNums\"\n          :style=\"chartStyle\"\n          :option=\"hybridNumsOption\"\n        />\n      </div>\n      <div class=\"right-box\">\n        <jie-echarts id=\"gasNums\" :style=\"chartStyle\" :option=\"gasNumsOption\" />\n      </div>\n    </div>\n    <div class=\"title-box\">\n      <span class=\"chart-title\">纯电</span><span class=\"chart-title\">混动</span\n      ><span class=\"chart-title\">燃气</span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, onMounted } from \"vue\";\nimport { deepCopy, numFormat, getColorByIndex } from \"@/utils/common\";\nimport { miniCircleOption } from \"@/utils/chart-options\";\nimport { busInfo } from \"@/api/operation-screen\";\nimport useOptions from \"./use-options\";\nexport default defineComponent({\n  name: \"bus\",\n  props: {\n    title: {\n      type: String,\n    },\n  },\n  setup(props) {\n    const { screenDataType, getTitle, chartStyle } = useOptions();\n    const colorArr = [\n      { start: \"#4DE8FF\", end: \"#2AA6FF\" },\n      { start: \"#FFFB00\", end: \"#FFA300\" },\n    ];\n    let options = reactive({\n      carNums: 3200, //车辆 标台数\n      pureElectricNums: 350, //纯电数\n      hybridNums: 200, //混动数\n      gasNums: 450, //燃气数\n    });\n    let pureElectricNumsOption = reactive(deepCopy(miniCircleOption));\n    let hybridNumsOption = reactive(deepCopy(miniCircleOption));\n    let gasNumsOption = reactive(deepCopy(miniCircleOption));\n    //初始化数据\n    function initData() {\n      busInfo({ type: screenDataType.value }).then((res) => {\n        const data = res.data.data;\n        refreshData(data);\n        console.log(\"options\", toRefs(options));\n      });\n    }\n    function formatData(val) {\n      return ((val / options.carNums) * 100).toFixed(0);\n    }\n    function formatChart(optionName, val, name) {\n      optionName.title.text = formatData(val) + \"%\";\n      console.log(\"val\", val);\n      optionName.series[0].data[0].value = val;\n      optionName.series[0].data[0].name = name;\n      optionName.series[1].data[0].value = options.carNums;\n    }\n    onMounted(() => {\n      initData();\n    });\n    //刷新数据\n    function refreshData(data) {\n      if (data) {\n        options.carNums = data.carNums;\n        options.pureElectricNums = data.pureElectricNums;\n        options.hybridNums = data.hybridNums;\n        options.gasNums = data.gasNums;\n\n        pureElectricNumsOption.title.text = formatData(data.pureElectricNums);\n        formatChart(pureElectricNumsOption, data.pureElectricNums, \"纯电\");\n        formatChart(hybridNumsOption, data.hybridNums, \"混动\");\n        hybridNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          0\n        );\n        formatChart(gasNumsOption, data.gasNums, \"燃气\");\n        gasNumsOption.series[0].data[0].itemStyle.color = getColorByIndex(\n          colorArr,\n          1\n        );\n      }\n    }\n    const curTitle = getTitle(props);\n    return {\n      ...toRefs(options),\n      screenDataType,\n      chartStyle,\n      numFormat,\n      pureElectricNumsOption,\n      hybridNumsOption,\n      gasNumsOption,\n      curTitle,\n      initData\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  display: flex;\n  height: calc(100% - 34px);\n  .left-box,\n  .center-box,\n  .right-box {\n    width: 33.3%;\n    position: relative;\n  }\n}\n.head-info {\n  display: flex;\n  align-items: baseline;\n  .val {\n    color: #ffe500;\n    font-size: 20px;\n  }\n  .label,\n  .unit {\n    color: #eeeeee;\n    font-size: 14px;\n    // display: flex;\n    // align-items: baseline;\n  }\n  .unit {\n    padding-left: 4px;\n  }\n}\n.car {\n  position: relative;\n  height: 100%;\n}\n.title-box {\n  position: absolute;\n  display: flex;\n  width: 100%;\n  color: white;\n  font-size: 16px;\n  height: 20px;\n  bottom: 5px;\n  z-index: 2;\n  .chart-title {\n    width: 33.3%;\n    display: flex;\n    justify-content: center;\n  }\n}\n</style>\n"]}]}